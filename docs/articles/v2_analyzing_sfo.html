<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analyzing SFO Passengers • sfo</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Analyzing SFO Passengers">
<meta property="og:description" content="sfo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sfo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v1_intro.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/v2_analyzing_sfo.html">Analyzing SFO Passengers</a>
    </li>
    <li>
      <a href="../articles/v3_analyzing_landing.html">Analyzing SFO Landing</a>
    </li>
    <li>
      <a href="../articles/v3_sankey.html">Create Sankey Diagram</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="v2_analyzing_sfo_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="v2_analyzing_sfo_files/plotly-binding-4.10.1/plotly.js"></script><script src="v2_analyzing_sfo_files/typedarray-0.1/typedarray.min.js"></script><script src="v2_analyzing_sfo_files/jquery-3.5.1/jquery.min.js"></script><link href="v2_analyzing_sfo_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="v2_analyzing_sfo_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="v2_analyzing_sfo_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="v2_analyzing_sfo_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Analyzing SFO Passengers</h1>
            
      
      
      <div class="hidden name"><code>v2_analyzing_sfo.Rmd</code></div>

    </div>

    
    
<p>The <code>sfo_passengers</code> dataset provides monthly statistics about the air traffic passengers at San Francisco International Airport (SFO) between July 2005 and December 2022. This vignette focuses on exploratory analysis approaches for this dataset.</p>
<div class="section level3">
<h3 id="data-prep">Data prep<a class="anchor" aria-label="anchor" href="#data-prep"></a>
</h3>
<p>We will start with reviewing the data structure:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sfo</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sfo_passengers"</span><span class="op">)</span></code></pre></div>
<p>For simplicity, let’s use a shorter name, <code>d</code>, for the dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">d</span> <span class="op">&lt;-</span> <span class="va">sfo_passengers</span></code></pre></div>
<p>Next let’s review the characteristics of the dataset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>
<span class="co">#&gt;   activity_period    operating_airline operating_airline_iata_code</span>
<span class="co">#&gt; 1          202212          EVA Airways                          BR</span>
<span class="co">#&gt; 2          202212          EVA Airways                          BR</span>
<span class="co">#&gt; 3          202212             Emirates                          EK</span>
<span class="co">#&gt; 4          202212             Emirates                          EK</span>
<span class="co">#&gt; 5          202212 Flair Airlines, Ltd.                          F8</span>
<span class="co">#&gt; 6          202212 Flair Airlines, Ltd.                          F8</span>
<span class="co">#&gt;      published_airline published_airline_iata_code   geo_summary  geo_region</span>
<span class="co">#&gt; 1          EVA Airways                          BR International        Asia</span>
<span class="co">#&gt; 2          EVA Airways                          BR International        Asia</span>
<span class="co">#&gt; 3             Emirates                          EK International Middle East</span>
<span class="co">#&gt; 4             Emirates                          EK International Middle East</span>
<span class="co">#&gt; 5 Flair Airlines, Ltd.                          F8 International      Canada</span>
<span class="co">#&gt; 6 Flair Airlines, Ltd.                          F8 International      Canada</span>
<span class="co">#&gt;   activity_type_code price_category_code      terminal boarding_area</span>
<span class="co">#&gt; 1           Deplaned               Other International             G</span>
<span class="co">#&gt; 2           Enplaned               Other International             G</span>
<span class="co">#&gt; 3           Deplaned               Other International             A</span>
<span class="co">#&gt; 4           Enplaned               Other International             A</span>
<span class="co">#&gt; 5           Deplaned            Low Fare International             A</span>
<span class="co">#&gt; 6           Enplaned            Low Fare International             A</span>
<span class="co">#&gt;   passenger_count</span>
<span class="co">#&gt; 1           12405</span>
<span class="co">#&gt; 2           15151</span>
<span class="co">#&gt; 3           13131</span>
<span class="co">#&gt; 4           14985</span>
<span class="co">#&gt; 5            2543</span>
<span class="co">#&gt; 6            2883</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    50730 obs. of  12 variables:</span>
<span class="co">#&gt;  $ activity_period            : int  202212 202212 202212 202212 202212 202212 202212 202212 202212 202212 ...</span>
<span class="co">#&gt;  $ operating_airline          : chr  "EVA Airways" "EVA Airways" "Emirates" "Emirates" ...</span>
<span class="co">#&gt;  $ operating_airline_iata_code: chr  "BR" "BR" "EK" "EK" ...</span>
<span class="co">#&gt;  $ published_airline          : chr  "EVA Airways" "EVA Airways" "Emirates" "Emirates" ...</span>
<span class="co">#&gt;  $ published_airline_iata_code: chr  "BR" "BR" "EK" "EK" ...</span>
<span class="co">#&gt;  $ geo_summary                : chr  "International" "International" "International" "International" ...</span>
<span class="co">#&gt;  $ geo_region                 : chr  "Asia" "Asia" "Middle East" "Middle East" ...</span>
<span class="co">#&gt;  $ activity_type_code         : chr  "Deplaned" "Enplaned" "Deplaned" "Enplaned" ...</span>
<span class="co">#&gt;  $ price_category_code        : chr  "Other" "Other" "Other" "Other" ...</span>
<span class="co">#&gt;  $ terminal                   : chr  "International" "International" "International" "International" ...</span>
<span class="co">#&gt;  $ boarding_area              : chr  "G" "G" "A" "A" ...</span>
<span class="co">#&gt;  $ passenger_count            : int  12405 15151 13131 14985 2543 2883 1772 1370 2817 1987 ...</span></code></pre></div>
<p>The <code>activity_period</code> variable provides the year-month of the observation using integer format. That is convenient if we filter by year and month, but less convenient if we want to plot the data as time series. Therefore, we will reformat the variable from YYYYMM to YYYYMMDD, setting the month’s day as 1st with the <code>as.Date</code> function:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d</span><span class="op">$</span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">activity_period</span>, <span class="fl">1</span>,<span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">activity_period</span>, <span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span>, <span class="st">"01"</span>, sep <span class="op">=</span><span class="st">"/"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"activity_period"</span>, <span class="st">"date"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;   activity_period       date</span>
<span class="co">#&gt; 1          202212 2022-12-01</span>
<span class="co">#&gt; 2          202212 2022-12-01</span>
<span class="co">#&gt; 3          202212 2022-12-01</span>
<span class="co">#&gt; 4          202212 2022-12-01</span>
<span class="co">#&gt; 5          202212 2022-12-01</span>
<span class="co">#&gt; 6          202212 2022-12-01</span>

<span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">date</span><span class="op">)</span>
<span class="co">#&gt; [1] "2005-07-01"</span>
<span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">date</span><span class="op">)</span>
<span class="co">#&gt; [1] "2022-12-01"</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exploratory-analysis">Exploratory analysis<a class="anchor" aria-label="anchor" href="#exploratory-analysis"></a>
</h3>
<p>After we reviewed and reformatted the data, we can start exploring the data and answer some questions such as:</p>
<ul>
<li><p>The monthly number of passengers at SFO</p></li>
<li><p>The airlines’ distribution</p></li>
<li><p>The geographic distribution of the passengers</p></li>
</ul>
<div class="section level4">
<h4 id="monthly-number-of-passengers">Monthly number of passengers<a class="anchor" aria-label="anchor" href="#monthly-number-of-passengers"></a>
</h4>
<p>There are multiple ways to aggregate the datasets for monthly time-series data, such as the passengers’ travel type (arrival vs. departure), geo type, and their combination. Let’s start with the total aggregation of the data:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com" class="external-link">plotly</a></span><span class="op">)</span>

<span class="va">d_total</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger_count</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d_total</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span>
<span class="co">#&gt;   date         total</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2005-07-01 6<span style="text-decoration: underline;">451</span>538</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2005-08-01 6<span style="text-decoration: underline;">391</span>732</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2005-09-01 5<span style="text-decoration: underline;">481</span>106</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2005-10-01 5<span style="text-decoration: underline;">541</span>430</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2005-11-01 5<span style="text-decoration: underline;">234</span>666</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2005-12-01 5<span style="text-decoration: underline;">343</span>594</span>

<span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">d_total</span>,
        x <span class="op">=</span> <span class="op">~</span> <span class="va">date</span>,
        y <span class="op">=</span> <span class="op">~</span> <span class="va">total</span>,
        type <span class="op">=</span> <span class="st">"scatter"</span>,
        mode <span class="op">=</span> <span class="st">"lines"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html" class="external-link">layout</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Monthly Air Traffic Passengers at SFO"</span>,
         yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of Passengers"</span><span class="op">)</span>,
         xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Source: San Francisco data portal (DataSF)"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-fdd684cdf9c6247dacd3" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fdd684cdf9c6247dacd3">{"x":{"visdat":{"10af439ab5b91":["function () ","plotlyVisDat"]},"cur_data":"10af439ab5b91","attrs":{"10af439ab5b91":{"x":{},"y":{},"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Monthly Air Traffic Passengers at SFO","yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Passengers"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Source: San Francisco data portal (DataSF)"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01"],"y":[6451538,6391732,5481106,5541430,5234666,5343594,4897778,4446048,5417556,5546586,5658000,6142792,6455210,6287678,5440200,5669918,5307774,5396400,5014860,4609980,5640170,5738494,6113868,6527242,6764764,6872834,5915060,6258618,5845000,5807274,5340106,5191352,6254774,6058042,6611908,6907502,7207892,7224594,6009440,6248902,5488970,5925874,5289078,4719600,5851836,6049946,6354200,6839190,7299404,7301336,6383052,6498856,5942968,6148418,5570932,5030722,6211916,6278118,6760710,7225772,7531648,7543684,6712730,6980200,6327318,6334248,5767620,5221334,6258410,6401054,7095608,7532646,7871178,7835768,7129940,7204910,6653718,6883386,6423200,5996238,6944880,7126014,7641140,8214390,8568886,8712432,7638758,7689974,6957780,6886078,6409274,5932954,7186728,7208208,7866032,8293594,8352972,8694118,7562336,7821580,6933756,7629968,6865250,6156810,7531008,7763786,8294192,8643666,8998442,9049836,7838144,8118886,7257572,7711670,7100168,6496288,8003042,8043354,8722280,9117022,9602296,9593306,8402788,8749498,8027628,8258104,7497058,7087278,8275358,8345024,9147992,9844250,10337448,10221276,9087518,9143994,8532962,8686738,7795370,6962810,8670574,8851840,9396134,10268220,10993032,11033674,9472010,9737348,9145404,9321008,8380734,7764362,9348070,9426366,10051190,10854288,11385144,11091718,9298200,9723564,9017212,9152898,8313642,7505526,9198378,9385882,10016002,10933376,11224624,11484874,8942816,9649118,8740926,9441984,8483502,7484448,3770932,277634,573140,1110238,1530548,1705156,1811984,2147764,2104634,1837446,1539816,1472648,2320040,2911888,3478042,4491078,5464020,5298308,4839718,5423276,5599362,5830910,4185136,4512164,6184934,6822732,7352226,8189356,4218011,4106428,3888243,3972446,3654498,3746158],"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>The COVID-19 pandemic effect can be seen in the series above, as the number of passengers sharply dropped in March 2020.</p>
<p>Likewise, we can aggregate the data by the activity type (arrival, departure, transit):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">d_activity_type</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">activity_type_code</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger_count</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d_activity_type</span><span class="op">)</span>
<span class="co">#&gt;         date activity_type_code   total</span>
<span class="co">#&gt; 1 2005-07-01           Deplaned 3254658</span>
<span class="co">#&gt; 2 2005-07-01           Enplaned 3138824</span>
<span class="co">#&gt; 3 2005-07-01     Thru / Transit   58056</span>
<span class="co">#&gt; 4 2005-08-01           Deplaned 3228936</span>
<span class="co">#&gt; 5 2005-08-01           Enplaned 3106292</span>
<span class="co">#&gt; 6 2005-08-01     Thru / Transit   56504</span>

<span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">d_activity_type</span>,
        x <span class="op">=</span> <span class="op">~</span> <span class="va">date</span>,
        y <span class="op">=</span> <span class="op">~</span> <span class="va">total</span>,
        color <span class="op">=</span> <span class="op">~</span> <span class="va">activity_type_code</span>,
        type <span class="op">=</span> <span class="st">"scatter"</span>,
        mode <span class="op">=</span> <span class="st">"lines"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html" class="external-link">layout</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Monthly Air Traffic Passengers at SFO by Activity Type"</span>,
         yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of Passengers"</span><span class="op">)</span>,
         xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Source: San Francisco data portal (DataSF)"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-a2d97123ec3bbf4ade5b" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a2d97123ec3bbf4ade5b">{"x":{"visdat":{"10af43fdbfdfe":["function () ","plotlyVisDat"]},"cur_data":"10af43fdbfdfe","attrs":{"10af43fdbfdfe":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Monthly Air Traffic Passengers at SFO by Activity Type","yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Passengers"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Source: San Francisco data portal (DataSF)"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01"],"y":[3254658,3228936,2706894,2716256,2583204,2595020,2487506,2208646,2682112,2765194,2805218,2961366,3246494,3166882,2696590,2801940,2621966,2609128,2540290,2284134,2780088,2853136,3023034,3179126,3406854,3451790,2940514,3087154,2889996,2825430,2715264,2565710,3094848,3011926,3273530,3405280,3649124,3640060,2994582,3092302,2707780,2926676,2688366,2354824,2921496,3028510,3151068,3346308,3682584,3702736,3163636,3212856,2945130,3028444,2829982,2512580,3103192,3134004,3365672,3526302,3812402,3825428,3323498,3450504,3139454,3131126,2929024,2613860,3115560,3196916,3532516,3709234,3983076,3962678,3544908,3577924,3296610,3380542,3265510,2994648,3449026,3584706,3800574,4048026,4350046,4369828,3833176,3812422,3461258,3379524,3282466,2970848,3584240,3648140,3884762,4092800,4223596,4376368,3785028,3875056,3412882,3787756,3502604,3083548,3758920,3919112,4128184,4271574,4593082,4550310,3940478,4048106,3596238,3827312,3625042,3272266,3999992,4056132,4373854,4495578,4897134,4877816,4203088,4316026,3992206,4078188,3843590,3579532,4132864,4218710,4592114,4844176,5301888,5187748,4574542,4572924,4255338,4264522,4033274,3500142,4307278,4448602,4710702,5038058,5616704,5592898,4717074,4855884,4542392,4541946,4345104,3889536,4641798,4786312,5020552,5316470,5811124,5597564,4680376,4851182,4516458,4471808,4296132,3751718,4557970,4787904,4995794,5331334,5700864,5779582,4495508,4785144,4258958,4627200,4372812,3764700,1905114,141164,283580,541436,754290,836796,884884,1056052,1044554,872432,801576,735136,1152644,1439682,1730152,2192106,2742862,2713466,2429404,2732044,2786656,2870870,2163886,2254284,3057848,3440930,3662230,3977102,2149380,2092543,1941036,1988671,1808759,1830374],"mode":"lines","type":"scatter","name":"Deplaned","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01"],"y":[3138824,3106292,2726280,2769644,2608866,2700000,2364626,2188940,2675540,2743152,2817982,3140544,3166110,3078422,2707172,2834006,2650708,2748812,2435358,2288782,2811964,2840960,3043768,3301894,3312824,3374048,2942188,3136552,2930174,2954602,2594198,2589296,3120760,3008148,3307520,3476668,3523158,3549470,2998626,3139090,2766266,2983348,2580070,2346812,2909592,3000930,3184914,3467852,3597282,3581178,3204376,3266836,2981780,3100920,2718750,2499344,3083912,3119408,3374320,3672698,3692980,3691248,3367132,3505346,3171068,3183178,2818272,2590422,3123082,3186814,3542658,3801220,3865242,3847496,3567906,3608508,3341224,3484590,3143690,2986300,3478578,3528376,3831042,4156132,4207554,4330298,3781624,3868226,3489458,3495100,3117370,2957158,3589280,3549190,3977504,4184082,4120118,4309666,3768686,3915222,3513666,3833628,3351624,3066380,3759948,3833696,4157394,4361320,4391366,4497510,3896840,4069898,3660668,3882212,3473150,3223242,4000628,3985036,4347462,4619186,4702596,4713828,4198724,4432816,4034274,4179096,3651692,3507522,4141792,4125924,4555072,4999684,5034920,5030304,4510782,4570852,4274946,4421012,3761972,3462518,4362602,4402088,4681922,5228906,5373722,5436962,4753428,4880552,4601502,4778684,4033274,3873978,4704420,4637360,5026250,5527570,5559014,5480714,4605838,4860152,4491826,4672186,4007298,3747388,4633040,4588280,5010040,5587836,5508064,5688650,4434124,4851078,4470602,4803742,4101512,3713874,1863332,136470,289560,568802,776258,868000,927100,1091712,1059924,964892,738240,737270,1167044,1472142,1747890,2298684,2720486,2584316,2410230,2690916,2808380,2948762,2010994,2251516,3118550,3370506,3678632,4199210,2059910,2006413,1940879,1977292,1841032,1907342],"mode":"lines","type":"scatter","name":"Enplaned","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-08-01","2020-11-01","2020-12-01","2021-02-01","2021-03-01","2021-04-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01"],"y":[58056,56504,47932,55530,42596,48574,45646,48462,59904,38240,34800,40882,42606,42374,36438,33972,35100,38460,39212,37064,48118,44398,47066,46222,45086,46996,32358,34912,24830,27242,30644,36346,39166,37968,30858,25554,35610,35064,16232,17510,14924,15850,20642,17964,20748,20506,18218,25030,19538,17422,15040,19164,16058,19054,22200,18798,24812,24706,20718,26772,26266,27008,22100,24350,16796,19944,20324,17052,19768,17324,20434,22192,22860,25594,17126,18478,15884,18254,14000,15290,17276,12932,9524,10232,11286,12306,23958,9326,7064,11454,9438,4948,13208,10878,3766,16712,9258,8084,8622,31302,7208,8584,11022,6882,12140,10978,8614,10772,13994,2016,826,882,666,2146,1976,780,2422,2186,964,2258,2566,1662,976,656,1148,820,1776,224,702,390,806,390,640,3224,2194,218,2678,1204,124,150,694,1150,3510,1256,2606,3814,1508,912,1510,378,2356,848,1852,2694,4388,10248,15006,13440,11986,12230,8928,8904,10212,6420,7368,9698,10168,14206,15696,16642,13184,12896,11366,11042,9178,5874,2486,360,156,122,242,352,64,288,672,526,84,316,4326,11278,10256,6364,8536,11296,11364,13044,8721,7472,6328,6483,4707,8442],"mode":"lines","type":"scatter","name":"Thru / Transit","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>The following plot provides the distribution of passengers by the flight geo type (international vs. domestic). We will use the <code>pivot_wider</code> function from the <strong>tidyr</strong> package to transform the <code>data.frame</code> into a wide format:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>

<span class="va">d_geo</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">geo_summary</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger_count</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">geo_summary</span>, values_from <span class="op">=</span> <span class="va">total</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d_geo</span><span class="op">)</span>
<span class="co">#&gt;         date Domestic International</span>
<span class="co">#&gt; 1 2005-07-01  4851804       1599734</span>
<span class="co">#&gt; 2 2005-08-01  4811808       1579924</span>
<span class="co">#&gt; 3 2005-09-01  4135846       1345260</span>
<span class="co">#&gt; 4 2005-10-01  4190238       1351192</span>
<span class="co">#&gt; 5 2005-11-01  3997758       1236908</span>
<span class="co">#&gt; 6 2005-12-01  4007680       1335914</span>

<span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">d_geo</span>, 
        x <span class="op">=</span> <span class="op">~</span> <span class="va">date</span>, 
        y <span class="op">=</span> <span class="op">~</span> <span class="va">Domestic</span>, 
        name <span class="op">=</span> <span class="st">"Domestic"</span>, 
        type <span class="op">=</span> <span class="st">"scatter"</span>, 
        mode <span class="op">=</span> <span class="st">"none"</span>, 
        stackgroup <span class="op">=</span> <span class="st">"one"</span>, 
        groupnorm <span class="op">=</span> <span class="st">"percent"</span>, fillcolor <span class="op">=</span> <span class="st">"#4C74C9"</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html" class="external-link">add_trace</a></span><span class="op">(</span>y <span class="op">=</span> <span class="op">~</span> <span class="va">International</span>,
            name <span class="op">=</span> <span class="st">"International"</span>,
            fillcolor <span class="op">=</span> <span class="st">"#50CB86"</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html" class="external-link">layout</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'United States Personal Expenditures by Categories'</span>,
         yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportion of Passengers"</span>, 
                      showgrid <span class="op">=</span> <span class="cn">FALSE</span>,
                      ticksuffix <span class="op">=</span> <span class="st">"%"</span><span class="op">)</span>,
         xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Source: San Francisco data portal (DataSF)"</span>,
                      showgrid <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-19ee3b406e5601ae5e39" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-19ee3b406e5601ae5e39">{"x":{"visdat":{"10af430600912":["function () ","plotlyVisDat"]},"cur_data":"10af430600912","attrs":{"10af430600912":{"x":{},"y":{},"mode":"none","stackgroup":"one","groupnorm":"percent","fillcolor":"#4C74C9","name":"Domestic","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"10af430600912.1":{"x":{},"y":{},"mode":"none","stackgroup":"one","groupnorm":"percent","fillcolor":"#50CB86","name":"International","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"United States Personal Expenditures by Categories","yaxis":{"domain":[0,1],"automargin":true,"title":"Proportion of Passengers","showgrid":false,"ticksuffix":"%"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Source: San Francisco data portal (DataSF)","showgrid":false},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01"],"y":[4851804,4811808,4135846,4190238,3997758,4007680,3555940,3308664,4042422,4120134,4197654,4567760,4777164,4658652,4062626,4251402,3979798,3969650,3593916,3386152,4170612,4270524,4571322,4900674,5028730,5159958,4430058,4739112,4427030,4288266,3834230,3873544,4687274,4597542,5033122,5245680,5466212,5476056,4586108,4820162,4256784,4526430,3938738,3646546,4559998,4667276,4973014,5307574,5642758,5633738,4940504,5118508,4719898,4810370,4259338,3906918,4864702,4924564,5208148,5533872,5709160,5766956,5150890,5427382,5012008,4950446,4377662,4054592,4888920,4971868,5466026,5832070,6077442,6058664,5562308,5658478,5352102,5443924,4983956,4763796,5521460,5601176,5911716,6375022,6674800,6807168,5963074,6070064,5578942,5422460,4995518,4706854,5720054,5705628,6103200,6423972,6439582,6724208,5842704,6145902,5520654,6074668,5330952,4815208,5965800,6148108,6422844,6674350,6949670,6988210,6085970,6432436,5793944,6082190,5485434,5057130,6315394,6311146,6715196,6975568,7323632,7319170,6495356,6844490,6357580,6428550,5665228,5492246,6455762,6488820,7045572,7490486,7810300,7747114,6927042,7061102,6689080,6600998,5777220,5288252,6700232,6725990,7123512,7658670,8196790,8270164,7158520,7528278,7187790,7180016,6288664,5926728,7158826,7261626,7636718,8079676,8479324,8258912,6895044,7348042,6836744,6809692,6016044,5526370,6899726,6977144,7331566,7944342,8163894,8456450,6384370,7158246,6459174,6914712,6076828,5741708,2863074,243414,536978,1021590,1388648,1501172,1607240,1904618,1831060,1520360,1257534,1285822,2059884,2628892,3136778,3953442,4727100,4502364,4165150,4728166,4766676,4771310,3356916,3798008,5119840,5441520,5681558,6097726,3063831,2993240,2886266,3010158,2766794,2739328],"mode":"none","stackgroup":"one","groupnorm":"percent","fillcolor":"#4C74C9","name":"Domestic","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01"],"y":[1599734,1579924,1345260,1351192,1236908,1335914,1341838,1137384,1375134,1426452,1460346,1575032,1678046,1629026,1377574,1418516,1327976,1426750,1420944,1223828,1469558,1467970,1542546,1626568,1736034,1712876,1485002,1519506,1417970,1519008,1505876,1317808,1567500,1460500,1578786,1661822,1741680,1748538,1423332,1428740,1232186,1399444,1350340,1073054,1291838,1382670,1381186,1531616,1656646,1667598,1442548,1380348,1223070,1338048,1311594,1123804,1347214,1353554,1552562,1691900,1822488,1776728,1561840,1552818,1315310,1383802,1389958,1166742,1369490,1429186,1629582,1700576,1793736,1777104,1567632,1546432,1301616,1439462,1439244,1232442,1423420,1524838,1729424,1839368,1894086,1905264,1675684,1619910,1378838,1463618,1413756,1226100,1466674,1502580,1762832,1869622,1913390,1969910,1719632,1675678,1413102,1555300,1534298,1341602,1565208,1615678,1871348,1969316,2048772,2061626,1752174,1686450,1463628,1629480,1614734,1439158,1687648,1732208,2007084,2141454,2278664,2274136,1907432,1905008,1670048,1829554,1831830,1595032,1819596,1856204,2102420,2353764,2527148,2474162,2160476,2082892,1843882,2085740,2018150,1674558,1970342,2125850,2272622,2609550,2796242,2763510,2313490,2209070,1957614,2140992,2092070,1837634,2189244,2164740,2414472,2774612,2905820,2832806,2403156,2375522,2180468,2343206,2297598,1979156,2298652,2408738,2684436,2989034,3060730,3028424,2558446,2490872,2281752,2527272,2406674,1742740,907858,34220,36162,88648,141900,203984,204744,243146,273574,317086,282282,186826,260156,282996,341264,537636,736920,795944,674568,695110,832686,1059600,828220,714156,1065094,1381212,1670668,2091630,1154180,1113188,1001977,962288,887704,1006830],"mode":"none","stackgroup":"one","groupnorm":"percent","fillcolor":"#50CB86","name":"International","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>As expected, the distribution of passengers by geo type has changed since the start of the COVID-19 pandemic, increasing domestic flights’ proportion.</p>
</div>
<div class="section level4">
<h4 id="airlines-analysis">Airlines Analysis<a class="anchor" aria-label="anchor" href="#airlines-analysis"></a>
</h4>
<p>The dataset provides two indicators about the airline company:</p>
<ul>
<li><p><code>operating_airline</code> field describes the aircraft operator’s name, and</p></li>
<li><p><code>published_airline</code> filed describes the name of the airline that issues the ticket and books revenue</p></li>
</ul>
<p>In most cases, it is the same company. In other cases, such as code-sharing operators, it could be two different companies. Let’s review the characteristics of those variables:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">operating_airline</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 102</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">published_airline</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 92</span></code></pre></div>
<p>You can notice that there are fewer published airlines compared to operating airlines. This potentially means that some operating airlines have lines with code sharing. For simplicity, we will focus on the <code>operating_airline</code> variable. Let’s review the unique combination of this variable:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">operating_airline</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   [1] "ABC Aerolineas S.A. de C.V. dba Interjet"        </span>
<span class="co">#&gt;   [2] "Aer Lingus, Ltd."                                </span>
<span class="co">#&gt;   [3] "Aeromexico"                                      </span>
<span class="co">#&gt;   [4] "Air Berlin"                                      </span>
<span class="co">#&gt;   [5] "Air Canada"                                      </span>
<span class="co">#&gt;   [6] "Air Canada Jazz"                                 </span>
<span class="co">#&gt;   [7] "Air China"                                       </span>
<span class="co">#&gt;   [8] "Air France"                                      </span>
<span class="co">#&gt;   [9] "Air India Limited"                               </span>
<span class="co">#&gt;  [10] "Air Italy S.P.A"                                 </span>
<span class="co">#&gt;  [11] "Air New Zealand"                                 </span>
<span class="co">#&gt;  [12] "Air Pacific Limited dba Fiji Airways"            </span>
<span class="co">#&gt;  [13] "Air Transat"                                     </span>
<span class="co">#&gt;  [14] "AirTran Airways"                                 </span>
<span class="co">#&gt;  [15] "Alaska Airlines"                                 </span>
<span class="co">#&gt;  [16] "All Nippon Airways"                              </span>
<span class="co">#&gt;  [17] "Allegiant Air"                                   </span>
<span class="co">#&gt;  [18] "American Airlines"                               </span>
<span class="co">#&gt;  [19] "American Eagle Airlines"                         </span>
<span class="co">#&gt;  [20] "Ameriflight"                                     </span>
<span class="co">#&gt;  [21] "Asiana Airlines"                                 </span>
<span class="co">#&gt;  [22] "ATA Airlines"                                    </span>
<span class="co">#&gt;  [23] "Atlantic Southeast Airlines"                     </span>
<span class="co">#&gt;  [24] "Atlas Air, Inc"                                  </span>
<span class="co">#&gt;  [25] "BelAir Airlines"                                 </span>
<span class="co">#&gt;  [26] "Boeing Company"                                  </span>
<span class="co">#&gt;  [27] "Breeze Aviation Group, Inc."                     </span>
<span class="co">#&gt;  [28] "British Airways"                                 </span>
<span class="co">#&gt;  [29] "Cathay Pacific"                                  </span>
<span class="co">#&gt;  [30] "China Airlines"                                  </span>
<span class="co">#&gt;  [31] "China Eastern"                                   </span>
<span class="co">#&gt;  [32] "China Southern"                                  </span>
<span class="co">#&gt;  [33] "Compass Airlines"                                </span>
<span class="co">#&gt;  [34] "Condor Flugdienst GmbH"                          </span>
<span class="co">#&gt;  [35] "COPA Airlines, Inc."                             </span>
<span class="co">#&gt;  [36] "Delta Air Lines"                                 </span>
<span class="co">#&gt;  [37] "El Al Israel Airlines LTD."                      </span>
<span class="co">#&gt;  [38] "Emirates"                                        </span>
<span class="co">#&gt;  [39] "Etihad Airways"                                  </span>
<span class="co">#&gt;  [40] "EVA Airways"                                     </span>
<span class="co">#&gt;  [41] "Evergreen International Airlines"                </span>
<span class="co">#&gt;  [42] "ExpressJet Airlines"                             </span>
<span class="co">#&gt;  [43] "Finnair"                                         </span>
<span class="co">#&gt;  [44] "Flair Airlines, Ltd."                            </span>
<span class="co">#&gt;  [45] "French Bee"                                      </span>
<span class="co">#&gt;  [46] "Frontier Airlines"                               </span>
<span class="co">#&gt;  [47] "Hawaiian Airlines"                               </span>
<span class="co">#&gt;  [48] "Hong Kong Airlines Limited"                      </span>
<span class="co">#&gt;  [49] "Horizon Air"                                     </span>
<span class="co">#&gt;  [50] "Iberia"                                          </span>
<span class="co">#&gt;  [51] "Icelandair (Inactive)"                           </span>
<span class="co">#&gt;  [52] "Icelandair EHF"                                  </span>
<span class="co">#&gt;  [53] "Independence Air"                                </span>
<span class="co">#&gt;  [54] "Japan Airlines"                                  </span>
<span class="co">#&gt;  [55] "Jazz Aviation"                                   </span>
<span class="co">#&gt;  [56] "Jet Airways"                                     </span>
<span class="co">#&gt;  [57] "JetBlue Airways"                                 </span>
<span class="co">#&gt;  [58] "KLM Royal Dutch Airlines"                        </span>
<span class="co">#&gt;  [59] "Korean Air Lines"                                </span>
<span class="co">#&gt;  [60] "LAN Peru"                                        </span>
<span class="co">#&gt;  [61] "Lufthansa German Airlines"                       </span>
<span class="co">#&gt;  [62] "Mesa Airlines"                                   </span>
<span class="co">#&gt;  [63] "Mesaba Airlines"                                 </span>
<span class="co">#&gt;  [64] "Mexicana Airlines"                               </span>
<span class="co">#&gt;  [65] "Miami Air International"                         </span>
<span class="co">#&gt;  [66] "Midwest Airlines"                                </span>
<span class="co">#&gt;  [67] "Northwest Airlines (became Delta)"               </span>
<span class="co">#&gt;  [68] "Norwegian Air Shuttle ASA"                       </span>
<span class="co">#&gt;  [69] "Norwegian Air UK Ltd"                            </span>
<span class="co">#&gt;  [70] "Pacific Aviation"                                </span>
<span class="co">#&gt;  [71] "Philippine Airline, Inc. (INACTIVE - DO NOT USE)"</span>
<span class="co">#&gt;  [72] "Philippine Airlines"                             </span>
<span class="co">#&gt;  [73] "Qantas Airways"                                  </span>
<span class="co">#&gt;  [74] "Qatar Airways"                                   </span>
<span class="co">#&gt;  [75] "Republic Airlines"                               </span>
<span class="co">#&gt;  [76] "Samsic Airport America, LLC"                     </span>
<span class="co">#&gt;  [77] "SAS Airlines"                                    </span>
<span class="co">#&gt;  [78] "Servisair"                                       </span>
<span class="co">#&gt;  [79] "Singapore Airlines"                              </span>
<span class="co">#&gt;  [80] "SkyWest Airlines"                                </span>
<span class="co">#&gt;  [81] "Southwest Airlines"                              </span>
<span class="co">#&gt;  [82] "Spirit Airlines"                                 </span>
<span class="co">#&gt;  [83] "Sun Country Airlines"                            </span>
<span class="co">#&gt;  [84] "Swiss International"                             </span>
<span class="co">#&gt;  [85] "Swissport USA"                                   </span>
<span class="co">#&gt;  [86] "TACA International Airlines, S.A."               </span>
<span class="co">#&gt;  [87] "TAP Air Portugal"                                </span>
<span class="co">#&gt;  [88] "Thomas Cook Airlines"                            </span>
<span class="co">#&gt;  [89] "Trego Dugan Aviation"                            </span>
<span class="co">#&gt;  [90] "Turkish Airlines"                                </span>
<span class="co">#&gt;  [91] "United Airlines"                                 </span>
<span class="co">#&gt;  [92] "United Airlines - Pre 07/01/2013"                </span>
<span class="co">#&gt;  [93] "US Airways"                                      </span>
<span class="co">#&gt;  [94] "Vietnam Airlines JSC"                            </span>
<span class="co">#&gt;  [95] "Virgin America"                                  </span>
<span class="co">#&gt;  [96] "Virgin Atlantic"                                 </span>
<span class="co">#&gt;  [97] "Volaris Airlines"                                </span>
<span class="co">#&gt;  [98] "WestJet Airlines"                                </span>
<span class="co">#&gt;  [99] "World Airways"                                   </span>
<span class="co">#&gt; [100] "WOW Air"                                         </span>
<span class="co">#&gt; [101] "XL Airways France"                               </span>
<span class="co">#&gt; [102] "Xtra Airways"</span></code></pre></div>
<p>The main thing that immediately pops out of this list is that United Airlines, the main carrier at SFO, is listed twice as <code>United Airlines</code> and <code>United Airlines - Pre 07/01/2013</code>. I could not find any reference that explains the second label. If analyzing data before July 2013, I would relabel those cases as <code>United Airlines</code>. For this analysis, we will focus on 2022, the most recent full year. Let’s start by filtering the data for 2022 flights:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">d22</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">activity_period</span> <span class="op">&gt;=</span> <span class="fl">202201</span> <span class="op">&amp;</span> <span class="va">activity_period</span> <span class="op">&lt;</span> <span class="fl">202301</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">published_airline</span>, <span class="va">geo_summary</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger_count</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></code></pre></div>
<p>Before we summarize the data by airlines, let’s see the distribution of flights by geo type (domestic vs. international):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">d22</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_summary</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total_geo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="op">~</span> <span class="va">geo_summary</span>,
          values <span class="op">=</span> <span class="op">~</span> <span class="va">total_geo</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html" class="external-link">add_pie</a></span><span class="op">(</span>hole <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-6fb001204534dde11fed" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-6fb001204534dde11fed">{"x":{"visdat":{"10af455784813":["function () ","plotlyVisDat"]},"cur_data":"10af455784813","attrs":{"10af455784813":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","hole":0.6,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["Domestic","International"],"values":[46955185,13877147],"type":"pie","hole":0.6,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>More than 75% of the air passenger traffic in SFO during 2022 were domestic. That is close to 47M passengers out of 60.8M passengers. Let’s use a treemap plot to see the distribution of passengers by airline and geo:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">d22</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">geo_summary</span> <span class="op">==</span> <span class="st">"Domestic"</span><span class="op">)</span>,
          labels <span class="op">=</span> <span class="op">~</span> <span class="va">published_airline</span>, 
          values <span class="op">=</span> <span class="op">~</span> <span class="va">total</span>,
          type <span class="op">=</span> <span class="st">"treemap"</span>,
          parents<span class="op">=</span>  <span class="op">~</span><span class="va">geo_summary</span>,
          domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>row<span class="op">=</span><span class="fl">0</span><span class="op">)</span>,
          name <span class="op">=</span> <span class="st">"Domestic"</span>,
          textinfo<span class="op">=</span><span class="st">"label+value+percent parent"</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html" class="external-link">add_trace</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">d22</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">geo_summary</span> <span class="op">==</span> <span class="st">"International"</span><span class="op">)</span>,
            labels <span class="op">=</span> <span class="op">~</span> <span class="va">published_airline</span>, 
            values <span class="op">=</span> <span class="op">~</span> <span class="va">total</span>,
            type <span class="op">=</span> <span class="st">"treemap"</span>,
            parents<span class="op">=</span>  <span class="op">~</span><span class="va">geo_summary</span>,
            domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>row<span class="op">=</span><span class="fl">1</span><span class="op">)</span>,
            name <span class="op">=</span> <span class="st">"International"</span>,
            textinfo<span class="op">=</span><span class="st">"label+value+percent parent"</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html" class="external-link">layout</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Passengers Distribution During 2022 by Geo"</span>,
      grid<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>columns<span class="op">=</span><span class="fl">1</span>, rows<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-6a38a7685d71935861dd" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-6a38a7685d71935861dd">{"x":{"visdat":{"10af431b03d59":["function () ","plotlyVisDat"],"10af4298bb78b":["function () ","data"]},"cur_data":"10af4298bb78b","attrs":{"10af431b03d59":{"labels":{},"values":{},"parents":{},"domain":{"row":0},"textinfo":"label+value+percent parent","name":"Domestic","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"treemap"},"10af4298bb78b":{"labels":{},"values":{},"parents":{},"domain":{"row":1},"textinfo":"label+value+percent parent","name":"International","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"treemap","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Passengers Distribution During 2022 by Geo","grid":{"columns":1,"rows":2},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["Alaska Airlines","American Airlines","Breeze Aviation Group, Inc.","Delta Air Lines","Frontier Airlines","Hawaiian Airlines","JetBlue Airways","Southwest Airlines","Sun Country Airlines","Swissport USA","United Airlines"],"values":[7397515,4115504,72627,4960111,977243,490951,1934344,2711198,181399,82,24114211],"parents":["Domestic","Domestic","Domestic","Domestic","Domestic","Domestic","Domestic","Domestic","Domestic","Domestic","Domestic"],"domain":{"row":0},"textinfo":"label+value+percent parent","name":"Domestic","type":"treemap","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null},{"labels":["Aer Lingus, Ltd.","Aeromexico","Air Canada","Air France","Air India Limited","Air New Zealand","Air Pacific Limited dba Fiji Airways","Air Transat","Alaska Airlines","All Nippon Airways","Asiana Airlines","British Airways","Cathay Pacific","China Airlines","Condor Flugdienst GmbH","COPA Airlines, Inc.","Emirates","EVA Airways","Flair Airlines, Ltd.","French Bee","Iberia","Japan Airlines","JetBlue Airways","KLM Royal Dutch Airlines","Korean Air Lines","Lufthansa German Airlines","Philippine Airline, Inc. (INACTIVE - DO NOT USE)","Philippine Airlines","Qatar Airways","Samsic Airport America, LLC","SAS Airlines","Singapore Airlines","Swiss International","TACA International Airlines, S.A.","TAP Air Portugal","Turkish Airlines","United Airlines","Vietnam Airlines JSC","Virgin Atlantic","WestJet Airlines"],"values":[201790,478727,1231846,456158,325416,80743,95914,16261,407673,219465,167258,505054,65235,77522,32311,168782,390049,147697,44318,189696,110040,176059,42496,324268,156790,502934,99262,227992,301543,56,171012,307117,223952,243888,108671,415298,4582240,102123,289420,190071],"parents":["International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International","International"],"domain":{"row":1},"textinfo":"label+value+percent parent","name":"International","type":"treemap","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level3">
<h3 id="air-traffic-summary">Air Traffic Summary<a class="anchor" aria-label="anchor" href="#air-traffic-summary"></a>
</h3>
<p>Last but not least, it would be interesting to leverage the different categorical variables to create a summary plot with Sankey. We will use the <code>sankey_ly</code> function, a <strong>plotly</strong> wrapper that automatically creates the data transformation and a Sankey plot with <strong>plotly</strong>. We will rank the top 20 airlines during 2022 and plot the passengers’ distribution by the airline, travel type (domestic or international), travel geo, activity type (deplaned, enplaned, and transit), and fare type (low or other):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rank</span> <span class="op">&lt;-</span> <span class="va">sfo_passengers</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">activity_period</span> <span class="op">&gt;=</span> <span class="fl">202201</span> <span class="op">&amp;</span> <span class="va">activity_period</span> <span class="op">&lt;=</span> <span class="fl">202212</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">operating_airline</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger_count</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="op">-</span><span class="va">total</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">operating_airline</span><span class="op">)</span>


<span class="va">sfo_passengers</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">activity_period</span> <span class="op">&gt;=</span> <span class="fl">202201</span> <span class="op">&amp;</span> <span class="va">activity_period</span> <span class="op">&lt;=</span> <span class="fl">202212</span>, <span class="va">operating_airline</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">rank</span><span class="op">$</span><span class="va">operating_airline</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">operating_airline</span>, <span class="va">geo_summary</span>, <span class="va">geo_region</span>, <span class="va">activity_type_code</span>, 
           <span class="va">price_category_code</span>, <span class="va">terminal</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger_count</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="https://tidyr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/sankey_ly.html">sankey_ly</a></span><span class="op">(</span>cat_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"operating_airline"</span>,<span class="st">"geo_summary"</span>,
                      <span class="st">"geo_region"</span>, <span class="st">"activity_type_code"</span>,
                      <span class="st">"price_category_code"</span><span class="op">)</span>,
          num_col <span class="op">=</span> <span class="st">"total"</span>,
          title <span class="op">=</span> <span class="st">"SFO Air Traffic Passengers Dist. During 2022"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-ff6564f304fd20c1892b" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ff6564f304fd20c1892b">{"x":{"visdat":{"10af467c64784":["function () ","plotlyVisDat"]},"cur_data":"10af467c64784","attrs":{"10af467c64784":{"orientation":"h","valueformat":".0f","node":{"label":["Aeromexico","Air Canada","Air France","Air India Limited","Alaska Airlines","American Airlines","British Airways","Delta Air Lines","Emirates","Frontier Airlines","Hawaiian Airlines","Horizon Air","JetBlue Airways","KLM Royal Dutch Airlines","Lufthansa German Airlines","Singapore Airlines","SkyWest Airlines","Southwest Airlines","Turkish Airlines","United Airlines","International","Domestic","Mexico","Canada","Europe","Asia","US","Middle East","Australia / Oceania","Central America","Deplaned","Enplaned","Thru / Transit","Other","Low Fare"],"pad":15,"thickness":30,"line":{"color":"black","width":0.5}},"link":{"source":[0,1,2,3,4,4,5,6,7,8,9,10,11,12,12,13,14,15,16,16,17,18,19,19,21,20,20,20,20,20,20,20,25,25,28,28,23,23,29,29,24,24,22,22,27,27,26,26,26,30,30,31,31,32,32],"target":[20,20,20,20,21,20,21,20,21,20,21,21,21,21,20,20,20,20,21,20,21,20,21,20,26,25,28,23,29,24,22,27,30,31,30,31,30,31,30,31,30,31,30,31,30,31,30,31,32,34,33,34,33,34,33],"value":[478727,1083499,456158,325416,4990079,407673,3910777,505054,4455666,390049,977243,490951,375937,1934344,42496,324268,502934,307117,6089401,67714,2711198,415298,20765481,4514526,46701077,1663230,493556,1520217,18438,3661539,1886090,577859,844283,818947,249743,243813,740181,780036,9386,9052,1815452,1846087,940115,945975,295008,282851,23384893,23303423,12761,2847740,25431321,2814248,25415936,3293,9468]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sankey"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"SFO Air Traffic Passengers Dist. During 2022","hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"orientation":"h","valueformat":".0f","node":{"label":["Aeromexico","Air Canada","Air France","Air India Limited","Alaska Airlines","American Airlines","British Airways","Delta Air Lines","Emirates","Frontier Airlines","Hawaiian Airlines","Horizon Air","JetBlue Airways","KLM Royal Dutch Airlines","Lufthansa German Airlines","Singapore Airlines","SkyWest Airlines","Southwest Airlines","Turkish Airlines","United Airlines","International","Domestic","Mexico","Canada","Europe","Asia","US","Middle East","Australia / Oceania","Central America","Deplaned","Enplaned","Thru / Transit","Other","Low Fare"],"pad":15,"thickness":30,"line":{"color":"black","width":0.5}},"link":{"source":[0,1,2,3,4,4,5,6,7,8,9,10,11,12,12,13,14,15,16,16,17,18,19,19,21,20,20,20,20,20,20,20,25,25,28,28,23,23,29,29,24,24,22,22,27,27,26,26,26,30,30,31,31,32,32],"target":[20,20,20,20,21,20,21,20,21,20,21,21,21,21,20,20,20,20,21,20,21,20,21,20,26,25,28,23,29,24,22,27,30,31,30,31,30,31,30,31,30,31,30,31,30,31,30,31,32,34,33,34,33,34,33],"value":[478727,1083499,456158,325416,4990079,407673,3910777,505054,4455666,390049,977243,490951,375937,1934344,42496,324268,502934,307117,6089401,67714,2711198,415298,20765481,4514526,46701077,1663230,493556,1520217,18438,3661539,1886090,577859,844283,818947,249743,243813,740181,780036,9386,9052,1815452,1846087,940115,945975,295008,282851,23384893,23303423,12761,2847740,25431321,2814248,25415936,3293,9468]},"type":"sankey","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rami Krispin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
